<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-list/iron-list.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../bower_components/paper-spinner/paper-spinner.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<dom-module id="zrickr-collection-list">
  <style include="iron-flex iron-flex-alignment">
    :host {
      display: block;
      margin-left: -7px;
    }

    iron-list {
      --iron-list-items-container: {

      };
    }

    .collection-container {
      border: 1px solid grey;
      width: 100px;
      height: 100px;
      margin: 8px;
      @apply(--layout-vertical);
    }

    .loadingIndicator {
    }

    .loadingIndicator paper-spinner {
      margin-right: 20px;
      --paper-spinner-layer-1-color: var(--secondary-text-color);
      --paper-spinner-layer-2-color: var(--primary-text-color);
      --paper-spinner-layer-3-color: var(--secondary-text-color);
      --paper-spinner-layer-4-color: var(--primary-text-color);
    }
  </style>

  <template>
    <iron-list items="[[collections]]" as="collection" scroll-target="document" grid>
      <template>
        <div class="collection-container" tabindex$="[[tabIndex]]">
          <iron-image sizing="contain" src="../../images/zrickr.png"></iron-image>
          [[collection.name]]
          [[collection.public]]
        </div>
      </template>
    </iron-list>

    <div class="loadingIndicator" hidden$="[[!loadingCollections]]">
      <paper-spinner active$="[[loadingCollections]]"></paper-spinner>
        Loading collections</b>
    </div>

    <iron-scroll-threshold id="scrollTheshold"
      lower-threshold="500"
      on-lower-threshold="_loadMoreCollections"
      scroll-target="document">
    </iron-scroll-threshold>

  </template>
</dom-module>

<script>
(function() {
  'use strict';

  Polymer({

    is: "zrickr-collection-list",

    properties: {
      auth: {
        type: Object
      },
      collections: {
        type: Array,
        notify: true,
        value: function() {
          return [];
        }
      },
      loadingCollections: {
        type: Boolean,
        value: true
      }
    },

    attached: function () {
      this.async( function() {

    	});
    },

    _loadMoreCollections() {
      console.log("HOLA");
    }

    /*renderList() {
      this.$.collectionsList.render();
    }*/

  });
}());
</script>
