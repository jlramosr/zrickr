<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="../../bower_components/paper-radio-button/paper-radio-button.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../elements/zrickr-dialog/zrickr-dialog.html">
<link rel="import" href="zrickr-collection-new-behavior.html">
<link rel="import" href="zrickr-collection-new-custom-dialog.html">
<link rel="import" href="zrickr-collection-new-users-dialog.html">

<!--
`<zrickr-collection-new-dialog>` is the first dialog in the process of
a collection creation.

    <zrickr-collection-new-dialog></zrickr-collection-new-dialog>

@element zrickr-collection-new-dialog
@demo demo/index.html
-->

<dom-module id="zrickr-collection-new-dialog">
  <template>
    <style include="iron-flex iron-flex-alignment">
      :host {
        --paper-input-error: {
          width: 90%;
          white-space: normal;
          font-size: 9px;
        }
      }
      paper-radio-group {
        @apply(--layout-vertical);
        margin-top: 10px;
      }
    </style>

    <zrickr-dialog
      id="newCollection"
      title="New Collection"
      description="Indicate the collection name and how it will be created"
      number-steps="[[numberSteps]]">
      {{fields}}
      <paper-input
        id="nameCollection"
        label="Collection Name"
        value="{{collectionName}}"
        required
        pattern="^[A-Za-z][A-Za-z0-9'\s-]*$"
        char-counter maxlength="20">
      </paper-input>
      <paper-radio-group selected="{{optionSelected}}">
        <paper-radio-button noink name="custom">
          <span>Custom Collection</span>
        </paper-radio-button>
        <paper-radio-button noink name="users">
          <span>From other users</span>
        </paper-radio-button>
      </paper-radio-group>
    </zrickr-dialog>

  </template>
</dom-module>

<script>
(function() {
  'use strict';

  Polymer({

    is: "zrickr-collection-new-dialog",

    behaviors: [ZrickrCollectionNewBehavior],

    /**
     * Validate this dialog and toggle `zrickr-collection-new-users-dialog` or
     * `zrickr-collection-new-custom-dialog` depending on the selected option.
     * See ZrickrCollectionNewBehavior.
     */
    nextStep() {
      let nameCollection = this.$.nameCollection;
      let nameCollectionValue = nameCollection.value.trim();
      if (nameCollection.validate()) {
        if (this.optionSelected == 'users') {
          this._toggleNextDialog('zrickr-collection-new-users-dialog');
        }
        else if (this.optionSelected == 'custom') {
          this._toggleNextDialog('zrickr-collection-new-custom-dialog');
        }
        return true;
      }
      if (nameCollectionValue == "") {
        nameCollection.errorMessage = "Name collection can not be empty!";
      }
      else {
        nameCollection.errorMessage ="Only letters,numbers,spaces and dashes!"
      }
      return false;
    }

  });
}());
</script>
