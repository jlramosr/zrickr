<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">
<!-- Possible views at one moment -->
<link rel="import" href="../../elements/zrickr-collection/zrickr-collection-new.html">
<link rel="import" href="../../elements/zrickr-profile/zrickr-profile.html">
<link rel="import" href="../../elements/zrickr-object/zrickr-object-new.html">
<link rel="import" href="../../elements/zrickr-object/zrickr-object-list.html">
<link rel="import" href="../../elements/zrickr-object/zrickr-object-view.html">

<!--
`<zrickr-route>` implements a routes handler

Example:

    <zrickr-route></zrickr-route>

@element zrickr-route
@demo demo/index.html
-->

<dom-module id="zrickr-route">
  <template>
    <app-location
      use-hash-as-path
      route="{{route}}"
      path="{{path}}">
    </app-location>
    <app-route
      id="pageRoute"
      route="{{route}}"
      pattern="/:page"
      data="{{pageRouteData}}"
      tail="{{pageSubrouteData}}"
      active="{{pageRouteActive}}">
    </app-route>
    <app-route
      id="idRoute"
      route="{{pageSubrouteData}}"
      pattern="/:id"
      data="{{idRouteData}}"
      tail="{{idSubrouteData}}"
      active="{{idRouteActive}}">
    </app-route>
    <app-route
      id="subIdRoute"
      route="{{idSubrouteData}}"
      pattern="/:id"
      data="{{subIdRouteData}}"
      tail="{{subIdSubrouteData}}"
      active="{{subIdRouteActive}}">
    </app-route>
  </template>
</dom-module>

<script>
(function() {
  'use strict';

  Polymer({
    is: 'zrickr-route',

    properties: {
      path: {
        type: String,
        value: undefined,
        notify: true
      },
      pageRouteData: {
        type: Object,
        value: undefined,
        notify: true
      },
      idRouteData: {
        type: Object,
        value: undefined,
        notify: true
      },
      subIdRouteData: {
        type: Object,
        value: undefined,
        notify: true
      }
    },

    shapePath(...subPaths) {
      this.set('path', '/' + subPaths.join('/') + '/');
    },

    noSubroute(level) {
      return !this.path.split('/')[level+1];
    }
  });
})();
</script>
